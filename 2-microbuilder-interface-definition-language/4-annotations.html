<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">

    <title>Microbuilder</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Customizable and extensible toolkit for transforming lightweight markup languages to various types of output formats, written in Scala" />
    <meta name="keywords" content="scala, text, markup, markdown, restructuredtext, parser, transformer, html, template engine, site generation, open-source" />

    <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">

</head>

<body data-spy="scroll" data-target=".toc" data-offset="200">


<div class="container">

    <!-- Docs nav
    ================================================== -->
    <div class="row">
        <div class="span4 toc" >

            <ul class="nav nav-list affix">
                <div class="toc">
                  <ul>
                    <li>
                      <p><a class="toc level1" href="../1-overview.html">Overview</a></p>
                      <ul>
                        <li><a class="toc level2" href="../1-overview.html#motive">Motive</a></li>
                        <li><a class="toc level2" href="../1-overview.html#how-microbuilder-works">How Microbuilder works</a></li>
                      </ul>
                    </li>
                    <li>
                      <p class="toc level1">Microbuilder Interface Definition Language</p>
                      <ul>
                        <li><a class="toc level2" href="1-concepts.html">Concepts</a></li>
                        <li>
                          <p><a class="toc level2" href="2-interface-definition.html">Interface definition</a></p>
                          <ul>
                            <li><a class="toc level3" href="2-interface-definition.html#package-and-directory-layout">Package and directory layout</a></li>
                            <li><a class="toc level3" href="2-interface-definition.html#interfaces-and-methods">Interfaces and methods</a></li>
                          </ul>
                        </li>
                        <li>
                          <p><a class="toc level2" href="3-json-schema.html">JSON schema</a></p>
                          <ul>
                            <li><a class="toc level3" href="3-json-schema.html#request-content-json-schema">Request content JSON schema</a></li>
                            <li><a class="toc level3" href="3-json-schema.html#response-content-json-schema">Response content JSON schema</a></li>
                            <li>
                              <p><a class="toc level3" href="3-json-schema.html#built-in-types-for-json-schema">Built-in types for JSON schema</a></p>
                              <ul>
                                <li><a class="toc level4" href="3-json-schema.html#primary-types">Primary types</a></li>
                                <li><a class="toc level4" href="3-json-schema.html#array-types">Array types</a></li>
                              </ul>
                            </li>
                            <li><a class="toc level3" href="3-json-schema.html#custom-class-types">Custom class types</a></li>
                          </ul>
                        </li>
                        <li>
                          <p class="toc level2 active">Annotations</p>
                          <ul>
                            <li><a class="toc level3" href="#id-1"><code>@:structuralFailure</code></a></li>
                            <li><a class="toc level3" href="#1"><code>@:nativeGen</code></a></li>
                            <li><a class="toc level3" href="#2"><code>@:route</code></a></li>
                            <li><a class="toc level3" href="#3"><code>@:requestContentType</code></a></li>
                            <li><a class="toc level3" href="#4"><code>@:responseContentType</code></a></li>
                            <li><a class="toc level3" href="#5"><code>@:requestHeader</code></a></li>
                            <li><a class="toc level3" href="#6"><code>@:final</code></a></li>
                            <li><a class="toc level3" href="#7"><code>@:transient</code></a></li>
                          </ul>
                        </li>
                      </ul>
                    </li>
                    <li>
                      <p class="toc level1">Client-side SDKs</p>
                      <ul>
                        <li>
                          <p><a class="toc level2" href="../3-client-side-sdks/1-for-scala-client.html">For Scala client</a></p>
                          <ul>
                            <li><a class="toc level3" href="../3-client-side-sdks/1-for-scala-client.html#requirement">Requirement</a></li>
                            <li>
                              <p><a class="toc level3" href="../3-client-side-sdks/1-for-scala-client.html#create-the-sdk">Create the SDK</a></p>
                              <ul>
                                <li><a class="toc level4" href="../3-client-side-sdks/1-for-scala-client.html#sbt-configuration-for-sdk">Sbt configuration for SDK</a></li>
                                <li><a class="toc level4" href="../3-client-side-sdks/1-for-scala-client.html#midl-api-definition">MIDL API definition</a></li>
                                <li><a class="toc level4" href="../3-client-side-sdks/1-for-scala-client.html#midl-json-schema-definition">MIDL JSON schema definition</a></li>
                              </ul>
                            </li>
                            <li><a class="toc level3" href="../3-client-side-sdks/1-for-scala-client.html#publish-the-sdk">Publish the SDK</a></li>
                            <li><a class="toc level3" href="../3-client-side-sdks/1-for-scala-client.html#dependency-settings-for-client-application">Dependency settings for Client application</a></li>
                            <li><a class="toc level3" href="../3-client-side-sdks/1-for-scala-client.html#use-sdk">Use SDK</a></li>
                          </ul>
                        </li>
                        <li><a class="toc level2" href="../3-client-side-sdks/2-for-javascript-client.html">For JavaScript client</a></li>
                        <li><a class="toc level2" href="../3-client-side-sdks/3-for-other-language-client.html">For other language client</a></li>
                      </ul>
                    </li>
                    <li>
                      <p class="toc level1">Server-side stubs</p>
                      <ul>
                        <li><a class="toc level2" href="../4-server-side-stubs/1-for-scala-server.html">For Scala server</a></li>
                        <li><a class="toc level2" href="../4-server-side-stubs/2-for-other-language-server.html">For other language server</a></li>
                      </ul>
                    </li>
                    <li>
                      <p class="toc level1">Generating Documentation</p>
                      <ul>
                        <li><a class="toc level2" href="../5-generating-documentation/1-haxedoc.html">Haxedoc</a></li>
                        <li><a class="toc level2" href="../5-generating-documentation/2-swagger-ui.html">Swagger UI</a></li>
                      </ul>
                    </li>
                  </ul>
                </div>
            </ul>

        </div>

        <div class="span8" id="top">

            
            <h1 id="annotations" class="title">Annotations</h1>
            <p>MIDL extends Haxe language with some annotations.</p>
            
            <h2 id="id-1" class="section"><code>@:structuralFailure</code></h2>
            <p><code>@:structuralFailure</code> can be put in front of a MIDL interface.
            It specifies what format of data the service will return
            when the server produces 4xx or 5xx HTTP status.</p>
            <p>For example:</p>
            <pre><code>@:structuralFailure(package.FileName.TypeName)
interface IMyService {
  // Put your endpoint definitions here...
}</code></pre>
            <p>This annotation affect <a href="../3-client-side-sdks/1-overview.html">client-side SDKs</a>&#39;s behavior of parsing response.
            Client-side SDKs will parse the response content as a JSON with a schema defined in <code>package.FileName.TypeName</code>,
            when the server produces 4xx or 5xx HTTP status.</p>
            
            <h2 id="1" class="section"><code>@:nativeGen</code></h2>
            <p><code>@:nativeGen</code> can be put in front of a MIDL interface or a MIDL class.
            It annotates that the MIDL interface should be compiled to a native interface of target platforms.</p>
            <pre><code>@:nativeGen
interface IMyService {
  // Put your endpoint definitions here...
}</code></pre>
            <p><code>@:nativeGen</code> prevents Haxe compiler generating helper methods for Haxe refactor API on the service.
            You&#39;d better always specify <code>@:nativeGen</code> for interfaces unless you want to use Haxe refactor API.</p>
            
            <h2 id="2" class="section"><code>@:route</code></h2>
            <p><code>@:route</code> must be put in front of a MIDL method.
            It specifies the HTTP method and URI correspond to this method.</p>
            <pre><code>@:nativeGen
interface IMyService {
  @:route(&quot;GET&quot;, &quot;users/{userId}&quot;)
  function getProfile(userId:String):Future&lt;Profile&gt;;
}</code></pre>
            <p>The first parameter is the HTTP method, e.g. GET, POST, PUT, HEAD...</p>
            <p>The second parameter is the URI template.
            Variables in <code>{...}</code> will be replaced to parameters of the MIDL method.
            The specification of URI template can be found at <a href="https://tools.ietf.org/html/rfc6570">RFC6570</a>.
            Right now, Microbuilder support <a href="https://tools.ietf.org/html/rfc6570#section-1.2">level 1</a> features of URI template.</p>
            
            <h2 id="3" class="section"><code>@:requestContentType</code></h2>
            <p><code>@:requestContentType</code> can be put in front of a MIDL method.
            It specifies what <code>Content-Type</code> HTTP header that the client will send to the server.</p>
            <pre><code>@:nativeGen
interface IMyService {
  @:requestContentType(&quot;text/json&quot;)
  @:route(&quot;PUT&quot;, &quot;users/{userId}&quot;)
  function setProfile(userId:String, contentBody:Profile):Future&lt;Void&gt;;
}</code></pre>
            <p>You must not set this annotation for a GET or HEAD method,
            while you must always set this annotation for a POST or PUT method.</p>
            <p>Note that the last parameter will become request content body if you specifies a <code>@:requestContentType</code>.</p>
            
            <h2 id="4" class="section"><code>@:responseContentType</code></h2>
            <p><code>@:responseContentType</code> can be put in front of a MIDL method.
            It specifies what <code>Content-Type</code> HTTP header that the server will send to the client.</p>
            <pre><code>@:nativeGen
interface IMyService {
  @:responseContentType(&quot;text/json&quot;)
  @:route(&quot;PUT&quot;, &quot;users/{userId}&quot;)
  function getProfile(userId:String):Future&lt;Profile&gt;;
}</code></pre>
            
            <h2 id="5" class="section"><code>@:requestHeader</code></h2>
            <p><code>@:requestHeader</code> can be put in front of a MIDL method.
            It adds custom headers into request.</p>
            <pre><code>@:nativeGen
interface IMyService {
  @:requestHeader(&quot;Custom-Request-Header&quot;, &quot;custom-header-value&quot;)
  @:requestHeader(&quot;Session-Id&quot;, sessionId)
  @:requestContentType(&quot;text/json&quot;)
  @:route(&quot;PUT&quot;, &quot;users/{userId}&quot;)
  function setProfile(userId:String, sessionId:String, contentBody:Profile):Future&lt;Void&gt;;
}</code></pre>
            <p>You can specify a string literal for a fixed header value, like <code>@:requestHeader(&quot;Custom-Request-Header&quot;, &quot;custom-header-value&quot;)</code>.
            However, sometimes you want to map a parameter to a header value, like <code>@:requestHeader(&quot;Session-Id&quot;, sessionId)</code>.</p>
            
            <h2 id="6" class="section"><code>@:final</code></h2>
            <p><code>@:final</code> can be put in front of a MIDL class.
            It prevent the class being extened and will affect the behavior of mapping between JSON and class instance.
            See <a href="3-json-schema.html#custom-class-types">Custom class types</a> section for more information.</p>
            
            <h2 id="7" class="section"><code>@:transient</code></h2>
            <p><code>@:transient</code> can be put in front of a MIDL class.
            A <code>@:transient</code> field will be ignored when mapping to JSON.</p>
            <p>For example, given a definition for <code>MyData</code></p>
            <pre><code>@:final
class MyData {
  public function new() {}
  public var notTransientField:Int = 1;
  @:transient public var transientField:Int = 2;
}</code></pre>
            <p>Then, create a <code>MyData</code> with default intial filed values: <code>new MyData()</code>.
            It will become <code>{ &quot;notTransientField&quot;: 1 }</code>.
            <code>transientField</code> will not be present in the JSON because of the <code>@:transient</code>.</p>

        </div>
    </div>

</div>

</body></html>
